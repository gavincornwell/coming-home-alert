version: 0.2

phases:
  install:
    commands:
      - npm install --global newman
  pre_build:
    commands:
      - echo Nothing to do in the pre_build phase...
  build:
    commands:
      - echo Build started on `date`
      - echo BASE_URL=$BASE_URL
      - echo STAGE_NAME=$STAGE_NAME
      - echo VALID_USER_ID=$VALID_USER_ID
      - cd src/test/resources
      - newman run --global-var userId=$VALID_USER_ID --global-var baseUrl=$BASE_URL --global-var stageName=$STAGE_NAME postman-collection.json
      # --reporters html,json --reporter-html-export report.html --reporter-json-export report.json
  post_build:
    commands:
      - echo Build completed on `date`
# artifacts:
#   files:
#     - report.html
#     - report.json